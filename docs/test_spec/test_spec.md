# テスト計画書

各テストケースが多くなればファイルを分ける。

## 1. 単体テスト

### 認証機能

| テスト ID | テスト項目           | 期待結果                             | 確認方法                                                 |
| --------- | -------------------- | ------------------------------------ | -------------------------------------------------------- |
| AUTH_001  | 正常なログイン       | ログイン成功<br>トークン発行         | ・正しい認証情報でログイン<br>・トークンの存在確認       |
| AUTH_002  | 誤ったパスワード     | ログイン失敗<br>エラーメッセージ表示 | ・誤ったパスワードでログイン試行<br>・エラー応答確認     |
| AUTH_003  | 存在しないユーザー   | ログイン失敗<br>エラーメッセージ表示 | ・未登録メールアドレスでログイン試行<br>・エラー応答確認 |
| AUTH_004  | トークン有効期限切れ | 再ログイン要求                       | ・期限切れトークンでアクセス<br>・エラー応答確認         |

### サブスク管理機能

| テスト ID | テスト項目   | 期待結果                   | 確認方法                                |
| --------- | ------------ | -------------------------- | --------------------------------------- |
| SUB_001   | サブスク登録 | 登録成功                   | ・必要情報を入力し登録<br>・DB 登録確認 |
| SUB_002   | サブスク更新 | 更新成功                   | ・既存データの更新<br>・DB 更新確認     |
| SUB_003   | サブスク削除 | 削除成功                   | ・既存データの削除<br>・DB 削除確認     |
| SUB_004   | 一覧取得     | ユーザーのサブスク一覧取得 | ・一覧 API コール<br>・データ件数確認   |

### カテゴリ管理機能

| テスト ID | テスト項目   | 期待結果                   | 確認方法                                |
| --------- | ------------ | -------------------------- | --------------------------------------- |
| CAT_001   | カテゴリ登録 | 登録成功                   | ・必要情報を入力し登録<br>・DB 登録確認 |
| CAT_002   | カテゴリ更新 | 更新成功                   | ・既存データの更新<br>・DB 更新確認     |
| CAT_003   | カテゴリ削除 | 削除成功                   | ・既存データの削除<br>・DB 削除確認     |
| CAT_004   | 一覧取得     | ユーザーのカテゴリ一覧取得 | ・一覧 API コール<br>・データ件数確認   |

## 2. 結合テスト

### API 結合テスト

| テスト ID | テスト項目                         | 期待結果                         | 確認方法                                             |
| --------- | ---------------------------------- | -------------------------------- | ---------------------------------------------------- |
| INT_001   | サブスク登録からカテゴリ別一覧取得 | 正常に登録され一覧に表示         | ・サブスク登録<br>・カテゴリ別一覧取得<br>・表示確認 |
| INT_002   | 支払い方法変更とサブスク更新       | 支払い方法が更新される           | ・支払い方法変更<br>・サブスク更新<br>・更新結果確認 |
| INT_003   | カテゴリ削除時の整合性             | 関連サブスクのカテゴリが null に | ・カテゴリ削除<br>・関連サブスク確認                 |

## 3. E2E テスト

### ユースケースシナリオ

| テスト ID | テスト項目                     | 期待結果                   | 確認方法                                                                       |
| --------- | ------------------------------ | -------------------------- | ------------------------------------------------------------------------------ |
| E2E_001   | 新規ユーザー登録～サブスク登録 | 一連の操作が正常に完了     | ・ユーザー登録<br>・ログイン<br>・サブスク登録<br>・カテゴリ登録<br>・一覧確認 |
| E2E_002   | サブスク管理フロー             | 登録/更新/削除が正常に完了 | ・各操作実行<br>・画面表示確認<br>・DB 状態確認                                |
| E2E_003   | カテゴリ別集計確認             | 金額集計が正しく表示       | ・複数サブスク登録<br>・カテゴリ別集計確認                                     |

## 4. 非機能テスト

### パフォーマンステスト

| テスト ID | テスト項目         | 期待結果           | 確認方法                                     |
| --------- | ------------------ | ------------------ | -------------------------------------------- |
| PERF_001  | 一覧表示の応答時間 | 1 秒以内           | ・100 件データ登録<br>・応答時間計測         |
| PERF_002  | 同時リクエスト     | エラーなく処理完了 | ・100 ユーザー同時アクセス<br>・エラー率確認 |

### セキュリティテスト

| テスト ID | テスト項目                       | 期待結果                 | 確認方法                                     |
| --------- | -------------------------------- | ------------------------ | -------------------------------------------- |
| SEC_001   | 認証トークンチェック             | 未認証アクセスがブロック | ・トークンなしでアクセス<br>・エラー応答確認 |
| SEC_002   | クロスサイトスクリプティング対策 | XSS 攻撃がブロック       | ・スクリプト入力<br>・エスケープ確認         |
